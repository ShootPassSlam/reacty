{"ast":null,"code":"import _toConsumableArray from \"/Users/dominicscotto/Desktop/Portfolio/react_rest/homework-dominic-scotto/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/dominicscotto/Desktop/Portfolio/react_rest/homework-dominic-scotto/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/dominicscotto/Desktop/Portfolio/react_rest/homework-dominic-scotto/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/dominicscotto/Desktop/Portfolio/react_rest/homework-dominic-scotto/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/dominicscotto/Desktop/Portfolio/react_rest/homework-dominic-scotto/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/dominicscotto/Desktop/Portfolio/react_rest/homework-dominic-scotto/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/dominicscotto/Desktop/Portfolio/react_rest/homework-dominic-scotto/src/components/People/People.js\";\nimport React, { Component } from 'react';\nimport Person from './Person/Person';\nimport { Container } from 'reactstrap';\nimport { List } from \"react-virtualized\";\n\nvar locationOf = function locationOf(array, value) {\n  if (array.length === 0) {\n    return 0;\n  }\n\n  var low = 0,\n      high = array.length;\n\n  while (low < high) {\n    var mid = low + high >>> 1;\n    if (array[mid][\"number\"] > value) low = mid + 1;else high = mid;\n  }\n\n  return low;\n};\n\nvar people =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(people, _Component);\n\n  function people() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, people);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(people)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      people: [],\n      endpoint: 'ws://localhost:7770'\n    };\n    return _this;\n  }\n\n  _createClass(people, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.socket = new WebSocket(this.state.endpoint);\n\n      this.socket.onopen = function () {\n        _this2.socket.send('init');\n      };\n\n      this.socket.onmessage = function (e) {\n        var message = null;\n\n        try {\n          message = JSON.parse(e.data);\n        } catch (e) {\n          console.log('malformed message');\n        }\n\n        if (message) {\n          var _people = _toConsumableArray(_this2.state.people);\n\n          var location = locationOf(_people, message.value);\n\n          if (!_people[location] || _people[location][\"number\"] !== message.value) {\n            _people.splice(location, 0, {\n              id: message.id,\n              name: message.name,\n              number: message.value\n            });\n          } else if (_people[location][\"number\"] === message.value) {\n            _people.splice(location, 1, {\n              id: message.id,\n              name: message.name,\n              number: message.value\n            });\n          }\n\n          _this2.setState({\n            people: _people\n          });\n        }\n      };\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.socket.close();\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      return nextState.people !== this.state.people;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      console.log(\"In the render:\", this.state.people);\n      return React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(List, {\n        source: this.state.people,\n        width: 1600,\n        height: 800,\n        rowHeight: 50,\n        rowRenderer: function rowRenderer(props) {\n          return React.createElement(Person, {\n            key: person.number,\n            number: person.number,\n            name: person.name,\n            id: person.id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 70\n            },\n            __self: this\n          });\n        },\n        rowCount: this.state.people.length,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return people;\n}(Component);\n\nexport default people; // this.state.people.map( person => {\n//     return <Person\n//         key = {person.number}\n//         number = {person.number}\n//         name = {person.name}\n//         id = {person.id}/>\n// })","map":{"version":3,"sources":["/Users/dominicscotto/Desktop/Portfolio/react_rest/homework-dominic-scotto/src/components/People/People.js"],"names":["React","Component","Person","Container","List","locationOf","array","value","length","low","high","mid","people","state","endpoint","socket","WebSocket","onopen","send","onmessage","e","message","JSON","parse","data","console","log","location","splice","id","name","number","setState","close","nextProps","nextState","rowRenderer","props","person"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport Person from './Person/Person';\nimport { Container } from 'reactstrap';\nimport { List } from \"react-virtualized\";\n\nconst locationOf = (array, value) =>{\n    if (array.length === 0){\n        return 0;\n    }\n    let low = 0,\n        high = array.length;\n    while (low < high) {\n        let mid = (low + high) >>> 1;\n        if (array[mid][\"number\"] > value) low = mid + 1;\n        else high = mid;\n    }\n    return low;\n}\n\nclass people extends Component {\n\n    state = {\n        people: [],\n        endpoint: 'ws://localhost:7770'\n    }\n\n    componentDidMount(){\n        this.socket = new WebSocket(this.state.endpoint);\n        this.socket.onopen = () => {\n            this.socket.send('init');\n        }\n        this.socket.onmessage = e => {\n            var message = null;\n            try {\n                message = JSON.parse(e.data);\n            } catch(e) {\n                console.log('malformed message');\n            }\n            if (message) {\n                const people = [...this.state.people];\n                const location = locationOf(people, message.value);\n                if(!people[location] || people[location][\"number\"]!== message.value){\n                    people.splice(location, 0, {id: message.id, name: message.name, number: message.value});\n                }else if(people[location][\"number\"]=== message.value){\n                    people.splice(location, 1, {id: message.id, name: message.name, number: message.value});\n                }\n                this.setState({people:people});\n            }\n        } \n    }\n\n    componentWillUnmount(){\n        this.socket.close();\n    }\n\n    shouldComponentUpdate(nextProps, nextState){\n        return nextState.people !== this.state.people;\n    }\n\n    render(){\n        console.log(\"In the render:\", this.state.people);\n        return (\n            <Container>\n                <List\n                    source={this.state.people}\n                    width={1600}\n                    height={800}\n                    rowHeight={50}\n                    rowRenderer={function rowRenderer(props){return <Person\n                        key = {person.number}\n                        number = {person.number}\n                        name = {person.name}\n                        id = {person.id}/>}}\n                    rowCount={this.state.people.length} />\n            </Container>\n        )\n    }\n}\n\nexport default people;\n\n// this.state.people.map( person => {\n//     return <Person\n//         key = {person.number}\n//         number = {person.number}\n//         name = {person.name}\n//         id = {person.id}/>\n// })"]},"metadata":{},"sourceType":"module"}