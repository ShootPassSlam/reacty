{"ast":null,"code":"import _toConsumableArray from \"/Users/dominicscotto/Desktop/Portfolio/react_rest/homework-dominic-scotto/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/dominicscotto/Desktop/Portfolio/react_rest/homework-dominic-scotto/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/dominicscotto/Desktop/Portfolio/react_rest/homework-dominic-scotto/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/dominicscotto/Desktop/Portfolio/react_rest/homework-dominic-scotto/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/dominicscotto/Desktop/Portfolio/react_rest/homework-dominic-scotto/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/dominicscotto/Desktop/Portfolio/react_rest/homework-dominic-scotto/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/dominicscotto/Desktop/Portfolio/react_rest/homework-dominic-scotto/src/components/People/People.js\";\nimport React, { Component } from 'react';\nimport { List } from \"react-virtualized\";\nimport Person from './Person/Person';\n\nvar people =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(people, _Component);\n\n  function people() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, people);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(people)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      people: [],\n      endpoint: 'ws://localhost:7770',\n      response: false\n    };\n    return _this;\n  }\n\n  _createClass(people, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.socket = new WebSocket(this.state.endpoint);\n\n      this.socket.onopen = function () {\n        _this2.socket.send('init');\n      };\n\n      this.socket.onmessage = function (e) {\n        var message = null;\n\n        try {\n          message = JSON.parse(e.data);\n        } catch (e) {\n          console.log('malformed message');\n        }\n\n        if (message) {\n          var data = JSON.parse(e.data);\n\n          var _people = _toConsumableArray(_this2.state.people);\n\n          _people[data.id] = {\n            id: data.id,\n            name: data.name,\n            number: data.value\n          };\n\n          _this2.setState({\n            people: _people\n          });\n        }\n      };\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.socket.close();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var listHeight = 600;\n      var rowHeight = 50;\n      var rowWidth = 800; // console.log(this.state.people);\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, React.createElement(List, {\n        width: rowWidth,\n        height: listHeight,\n        rowHeight: rowHeight,\n        rowRenderer: React.createElement(Person, {\n          key: index,\n          id: person.id,\n          name: person.name,\n          number: person.number,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52\n          },\n          __self: this\n        }),\n        rowCount: this.list.length,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return people;\n}(Component);\n\nexport default people;","map":{"version":3,"sources":["/Users/dominicscotto/Desktop/Portfolio/react_rest/homework-dominic-scotto/src/components/People/People.js"],"names":["React","Component","List","Person","people","state","endpoint","response","socket","WebSocket","onopen","send","onmessage","e","message","JSON","parse","data","console","log","id","name","number","value","setState","close","listHeight","rowHeight","rowWidth","index","person","list","length"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,QAAqB,mBAArB;AAEA,OAAOC,MAAP,MAAmB,iBAAnB;;IAEMC,M;;;;;;;;;;;;;;;;;UAEFC,K,GAAQ;AACJD,MAAAA,MAAM,EAAE,EADJ;AAEJE,MAAAA,QAAQ,EAAE,qBAFN;AAGJC,MAAAA,QAAQ,EAAE;AAHN,K;;;;;;wCAMW;AAAA;;AACf,WAAKC,MAAL,GAAc,IAAIC,SAAJ,CAAc,KAAKJ,KAAL,CAAWC,QAAzB,CAAd;;AACA,WAAKE,MAAL,CAAYE,MAAZ,GAAqB,YAAM;AACvB,QAAA,MAAI,CAACF,MAAL,CAAYG,IAAZ,CAAiB,MAAjB;AACH,OAFD;;AAGA,WAAKH,MAAL,CAAYI,SAAZ,GAAwB,UAAAC,CAAC,EAAI;AACzB,YAAIC,OAAO,GAAG,IAAd;;AACA,YAAI;AACAA,UAAAA,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWH,CAAC,CAACI,IAAb,CAAV;AACH,SAFD,CAEE,OAAMJ,CAAN,EAAS;AACPK,UAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACH;;AACD,YAAIL,OAAJ,EAAa;AACT,cAAIG,IAAI,GAAGF,IAAI,CAACC,KAAL,CAAWH,CAAC,CAACI,IAAb,CAAX;;AACA,cAAMb,OAAM,sBAAO,MAAI,CAACC,KAAL,CAAWD,MAAlB,CAAZ;;AACAA,UAAAA,OAAM,CAACa,IAAI,CAACG,EAAN,CAAN,GAAiB;AAACA,YAAAA,EAAE,EAAEH,IAAI,CAACG,EAAV;AAAcC,YAAAA,IAAI,EAAEJ,IAAI,CAACI,IAAzB;AAA+BC,YAAAA,MAAM,EAAEL,IAAI,CAACM;AAA5C,WAAjB;;AACA,UAAA,MAAI,CAACC,QAAL,CAAc;AAACpB,YAAAA,MAAM,EAACA;AAAR,WAAd;AACH;AACJ,OAbD;AAcH;;;2CAEqB;AAClB,WAAKI,MAAL,CAAYiB,KAAZ;AACH;;;6BAEO;AAEJ,UAAMC,UAAU,GAAG,GAAnB;AACA,UAAMC,SAAS,GAAG,EAAlB;AACA,UAAMC,QAAQ,GAAG,GAAjB,CAJI,CAKJ;;AACA,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AACE,QAAA,KAAK,EAAEA,QADT;AAEE,QAAA,MAAM,EAAEF,UAFV;AAGE,QAAA,SAAS,EAAEC,SAHb;AAIE,QAAA,WAAW,EACP,oBAAC,MAAD;AACI,UAAA,GAAG,EAAIE,KADX;AAEI,UAAA,EAAE,EAAIC,MAAM,CAACV,EAFjB;AAGI,UAAA,IAAI,EAAIU,MAAM,CAACT,IAHnB;AAII,UAAA,MAAM,EAAIS,MAAM,CAACR,MAJrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UALN;AAWE,QAAA,QAAQ,EAAE,KAAKS,IAAL,CAAUC,MAXtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADJ;AAgBH;;;;EAvDgB/B,S;;AA0DrB,eAAeG,MAAf","sourcesContent":["import React, { Component } from 'react';\nimport { List } from \"react-virtualized\";\n\nimport Person from './Person/Person'\n\nclass people extends Component {\n\n    state = {\n        people: [],\n        endpoint: 'ws://localhost:7770',\n        response: false\n    };\n\n    componentDidMount(){\n        this.socket = new WebSocket(this.state.endpoint);\n        this.socket.onopen = () => {\n            this.socket.send('init');\n        }\n        this.socket.onmessage = e => {\n            var message = null;\n            try {\n                message = JSON.parse(e.data);\n            } catch(e) {\n                console.log('malformed message');\n            }\n            if (message) {\n                let data = JSON.parse(e.data);\n                const people = [...this.state.people];\n                people[data.id]= {id: data.id, name: data.name, number: data.value};\n                this.setState({people:people});\n            }\n        } \n    }\n\n    componentWillUnmount(){\n        this.socket.close();\n    }\n\n    render(){\n\n        const listHeight = 600;\n        const rowHeight = 50;\n        const rowWidth = 800;\n        // console.log(this.state.people);\n        return (\n            <div>\n              <List\n                width={rowWidth}\n                height={listHeight}\n                rowHeight={rowHeight}\n                rowRenderer={\n                    <Person\n                        key = {index} \n                        id = {person.id} \n                        name = {person.name} \n                        number = {person.number}/>\n                }\n                rowCount={this.list.length} />\n            </div>\n        )\n    }\n}\n\nexport default people;"]},"metadata":{},"sourceType":"module"}