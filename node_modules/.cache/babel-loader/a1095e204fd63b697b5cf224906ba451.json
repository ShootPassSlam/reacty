{"ast":null,"code":"import _toConsumableArray from \"/Users/dominicscotto/Desktop/Portfolio/react_rest/homework-dominic-scotto/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/dominicscotto/Desktop/Portfolio/react_rest/homework-dominic-scotto/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/dominicscotto/Desktop/Portfolio/react_rest/homework-dominic-scotto/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/dominicscotto/Desktop/Portfolio/react_rest/homework-dominic-scotto/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/dominicscotto/Desktop/Portfolio/react_rest/homework-dominic-scotto/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/dominicscotto/Desktop/Portfolio/react_rest/homework-dominic-scotto/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/dominicscotto/Desktop/Portfolio/react_rest/homework-dominic-scotto/src/components/People/People.js\";\nimport React, { Component } from 'react';\nimport Person from './Person/Person';\n\nvar people =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(people, _Component);\n\n  function people(props) {\n    var _this;\n\n    _classCallCheck(this, people);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(people).call(this, props));\n    _this.state = {\n      people: [],\n      endpoint: 'ws://localhost:7770'\n    };\n\n    _this.ws.onmessage = function (e) {\n      var message = null;\n\n      try {\n        message = JSON.parse(e.data);\n      } catch (e) {\n        console.log('malformed message');\n      }\n\n      if (message) {\n        var data = JSON.parse(e.data);\n\n        var _people = _toConsumableArray(_this.state.people);\n\n        _people[data.id] = {\n          id: data.id,\n          name: data.name,\n          number: data.value\n        }; // console.log(\"NEW PEOPLE LIST:\", people);\n\n        _this.setState({\n          people: _people\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(people, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var socket = new WebSocket(this.state.endpoint);\n\n      socket.onopen = function () {\n        _this2.ws.send('init');\n      };\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.ws.close();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      console.log(this.state.people);\n      return this.state.people.filter(function (el) {\n        return el !== undefined;\n      }).map(function (person, index) {\n        return React.createElement(Person, {\n          key: index,\n          id: person.id,\n          name: person.name,\n          number: person.number,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        });\n      });\n    }\n  }]);\n\n  return people;\n}(Component);\n\nexport default people;","map":{"version":3,"sources":["/Users/dominicscotto/Desktop/Portfolio/react_rest/homework-dominic-scotto/src/components/People/People.js"],"names":["React","Component","Person","people","props","state","endpoint","ws","onmessage","e","message","JSON","parse","data","console","log","id","name","number","value","setState","socket","WebSocket","onopen","send","close","filter","el","undefined","map","person","index"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,OAAOC,MAAP,MAAmB,iBAAnB;;IAEMC,M;;;;;AAEF,kBAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AACd,gFAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACTF,MAAAA,MAAM,EAAE,EADC;AAETG,MAAAA,QAAQ,EAAE;AAFD,KAAb;;AAKA,UAAKC,EAAL,CAAQC,SAAR,GAAoB,UAAAC,CAAC,EAAI;AACrB,UAAIC,OAAO,GAAG,IAAd;;AACA,UAAI;AACAA,QAAAA,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWH,CAAC,CAACI,IAAb,CAAV;AACH,OAFD,CAEE,OAAMJ,CAAN,EAAS;AACPK,QAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACH;;AACD,UAAIL,OAAJ,EAAa;AACT,YAAIG,IAAI,GAAGF,IAAI,CAACC,KAAL,CAAWH,CAAC,CAACI,IAAb,CAAX;;AACA,YAAMV,OAAM,sBAAO,MAAKE,KAAL,CAAWF,MAAlB,CAAZ;;AACAA,QAAAA,OAAM,CAACU,IAAI,CAACG,EAAN,CAAN,GAAiB;AAACA,UAAAA,EAAE,EAAEH,IAAI,CAACG,EAAV;AAAcC,UAAAA,IAAI,EAAEJ,IAAI,CAACI,IAAzB;AAA+BC,UAAAA,MAAM,EAAEL,IAAI,CAACM;AAA5C,SAAjB,CAHS,CAIT;;AACA,cAAKC,QAAL,CAAc;AAACjB,UAAAA,MAAM,EAACA;AAAR,SAAd;AACH;AACJ,KAdD;;AAPc;AAsBjB;;;;wCACkB;AAAA;;AACf,UAAMkB,MAAM,GAAG,IAAIC,SAAJ,CAAc,KAAKjB,KAAL,CAAWC,QAAzB,CAAf;;AACAe,MAAAA,MAAM,CAACE,MAAP,GAAgB,YAAM;AAClB,QAAA,MAAI,CAAChB,EAAL,CAAQiB,IAAR,CAAa,MAAb;AACH,OAFD;AAGH;;;2CAEqB;AAClB,WAAKjB,EAAL,CAAQkB,KAAR;AACH;;;6BAEO;AACJX,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKV,KAAL,CAAWF,MAAvB;AACA,aAAO,KAAKE,KAAL,CAAWF,MAAX,CAAkBuB,MAAlB,CAA0B,UAAAC,EAAE,EAAI;AAAC,eAAOA,EAAE,KAAKC,SAAd;AAAwB,OAAzD,EAA2DC,GAA3D,CAAgE,UAACC,MAAD,EAASC,KAAT,EAAmB;AACtF,eAAO,oBAAC,MAAD;AACH,UAAA,GAAG,EAAIA,KADJ;AAEH,UAAA,EAAE,EAAID,MAAM,CAACd,EAFV;AAGH,UAAA,IAAI,EAAIc,MAAM,CAACb,IAHZ;AAIH,UAAA,MAAM,EAAIa,MAAM,CAACZ,MAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AAKC,OANE,CAAP;AAOH;;;;EA7CgBjB,S;;AAgDrB,eAAeE,MAAf","sourcesContent":["import React, { Component } from 'react';\n\nimport Person from './Person/Person'\n\nclass people extends Component {\n\n    constructor(props){\n        super(props);\n        this.state = {\n            people: [],\n            endpoint: 'ws://localhost:7770'\n        };\n\n        this.ws.onmessage = e => {\n            var message = null;\n            try {\n                message = JSON.parse(e.data);\n            } catch(e) {\n                console.log('malformed message');\n            }\n            if (message) {\n                let data = JSON.parse(e.data);\n                const people = [...this.state.people];\n                people[data.id]= {id: data.id, name: data.name, number: data.value};\n                // console.log(\"NEW PEOPLE LIST:\", people);\n                this.setState({people:people});\n            }\n        } \n    }\n    componentDidMount(){\n        const socket = new WebSocket(this.state.endpoint);\n        socket.onopen = () => {\n            this.ws.send('init');\n        }\n    }\n\n    componentWillUnmount(){\n        this.ws.close();\n    }\n\n    render(){\n        console.log(this.state.people);\n        return this.state.people.filter( el => {return el !== undefined}).map( (person, index) => {\n            return <Person\n                key = {index} \n                id = {person.id} \n                name = {person.name} \n                number = {person.number}/>\n            })\n    }\n}\n\nexport default people;"]},"metadata":{},"sourceType":"module"}